@startuml
!pragma teoz true
title Robustness - UC6: Make Donation
hide footbox

skinparam shadowing false
skinparam roundcorner 12
skinparam dpi 200
skinparam maxMessageSize 30
skinparam sequenceMessageAlign center
skinparam responseMessageBelowArrow true
skinparam ParticipantPadding 18

actor "Donor" as Donor
actor "Payment Gateway" as PG

box "NGO Management System"
boundary "Donation\nPage" as UI
control "Donation\nController" as DonCtrl
database "Donation\nDB" as DonDB
entity "Receipt\nGenerator" as Rcpt
end box

Donor -> UI : submitDonation(amount, card)
UI -> DonCtrl : processTransaction(data)

DonCtrl -> PG : authorizeCharge(amount, token)
PG --> DonCtrl : result(approved, txID)

DonCtrl -> DonDB : createRecord(status='Received')
DonCtrl -> Rcpt : generatePDF(txID)
Rcpt --> DonCtrl : return(fileURL)

DonCtrl --> UI : result(success, receiptLink)
UI --> Donor : showThankYou()
@enduml